
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>GUI_ZavProrBR</title><meta name="generator" content="MATLAB 8.3"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2016-09-07"><meta name="DC.source" content="GUI_ZavProrBR.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><pre class="codeinput"><span class="keyword">function</span> varargout = GUI_ZavProrBR(varargin)
<span class="comment">% GUI_ZAVPRORBR MATLAB code for GUI_ZavProrBR.fig</span>
<span class="comment">%      GUI_ZAVPRORBR, by itself, creates a new GUI_ZAVPRORBR or raises the existing</span>
<span class="comment">%      singleton*.</span>
<span class="comment">%</span>
<span class="comment">%      H = GUI_ZAVPRORBR returns the handle to a new GUI_ZAVPRORBR or the handle to</span>
<span class="comment">%      the existing singleton*.</span>
<span class="comment">%</span>
<span class="comment">%      GUI_ZAVPRORBR('CALLBACK',hObject,eventData,handles,...) calls the local</span>
<span class="comment">%      function named CALLBACK in GUI_ZAVPRORBR.M with the given input arguments.</span>
<span class="comment">%</span>
<span class="comment">%      GUI_ZAVPRORBR('Property','Value',...) creates a new GUI_ZAVPRORBR or raises the</span>
<span class="comment">%      existing singleton*.  Starting from the left, property value pairs are</span>
<span class="comment">%      applied to the GUI before GUI_ZavProrBR_OpeningFcn gets called.  An</span>
<span class="comment">%      unrecognized property name or invalid value makes property application</span>
<span class="comment">%      stop.  All inputs are passed to GUI_ZavProrBR_OpeningFcn via varargin.</span>
<span class="comment">%</span>
<span class="comment">%      *See GUI Options on GUIDE's Tools menu.  Choose "GUI allows only one</span>
<span class="comment">%      instance to run (singleton)".</span>
<span class="comment">%</span>
<span class="comment">% See also: GUIDE, GUIDATA, GUIHANDLES</span>

<span class="comment">% Edit the above text to modify the response to help GUI_ZavProrBR</span>

<span class="comment">% Last Modified by GUIDE v2.5 22-Feb-2016 18:18:32</span>

<span class="comment">% Begin initialization code - DO NOT EDIT</span>
gui_Singleton = 1;
gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
                   <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
                   <span class="string">'gui_OpeningFcn'</span>, @GUI_ZavProrBR_OpeningFcn, <span class="keyword">...</span>
                   <span class="string">'gui_OutputFcn'</span>,  @GUI_ZavProrBR_OutputFcn, <span class="keyword">...</span>
                   <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
                   <span class="string">'gui_Callback'</span>,   []);
<span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
    gui_State.gui_Callback = str2func(varargin{1});
<span class="keyword">end</span>

<span class="keyword">if</span> nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
<span class="keyword">else</span>
    gui_mainfcn(gui_State, varargin{:});
<span class="keyword">end</span>
<span class="comment">% End initialization code - DO NOT EDIT</span>

<span class="comment">%feature('DefaultCharacterSet', 'UTF8')</span>
<span class="comment">% --- Executes just before GUI_ZavProrBR is made visible.</span>
<span class="keyword">function</span> GUI_ZavProrBR_OpeningFcn(hObject, eventdata, handles, varargin)
<span class="comment">% This function has no output args, see OutputFcn.</span>
<span class="comment">% hObject    handle to figure</span>
<span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
<span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
<span class="comment">% varargin   command line arguments to GUI_ZavProrBR (see VARARGIN)</span>

<span class="comment">% Choose default command line output for GUI_ZavProrBR</span>
handles.output = hObject;

<span class="comment">% Update handles structure</span>
guidata(hObject, handles);

<span class="comment">%set(handles.Gui_ZAVPRBR, 'units', 'normalized', 'position', [0.05 0.15 0.9 0.8])</span>

ZavProrBR_Rac               <span class="comment">%Racunanje</span>
pres_tacke                  <span class="comment">%Presecne tacke fi(q)</span>
PresTackeOgr                <span class="comment">%Presecne tacke Fki(q)</span>
axes(handles.slika1)
DiagramBR1                  <span class="comment">%Plotovanje prvog dijagrama</span>
axes(handles.slika2)
DijagramBR2                 <span class="comment">%Plotovanje drugog dijagrama</span>
axes(handles.slika3)
DijagramBR3                 <span class="comment">%Plotovanje treceg dijagrama</span>
axes(handles.slika4)
DijagramBR4                 <span class="comment">%Plotovanje cetvrtiog dijagrama</span>

h = waitbar(0,<span class="string">'Molimo da sacekate...'</span>);
warn_dialog                 <span class="comment">%Prozor upozorenja da li vozilo ispunjava uslove</span>
steps = 1;

<span class="keyword">for</span> step = 1:steps
    <span class="comment">% computations take place here</span>
    waitbar(step / steps)
    print_ZavProrBR
<span class="keyword">end</span>



close(h)


<span class="comment">% UIWAIT makes GUI_ZavProrBR wait for user response (see UIRESUME)</span>
<span class="comment">% uiwait(handles.Gui_ZAVPRBR);</span>


<span class="comment">% --- Outputs from this function are returned to the command line.</span>
<span class="keyword">function</span> varargout = GUI_ZavProrBR_OutputFcn(hObject, eventdata, handles)
<span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
<span class="comment">% hObject    handle to figure</span>
<span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
<span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>

<span class="comment">% Get default command line output from handles structure</span>
varargout{1} = handles.output;
<span class="keyword">function</span> ZavProrBR_Rac
</pre><pre class="codeinput"><span class="comment">%Velicine</span>
<span class="comment">%==========================================================================</span>
<span class="comment">%F_p                [N]     Najveca dozvoljena sila na komandi</span>
<span class="comment">%i_p                [/]     Prenosni odnos pedale</span>
<span class="comment">%C_sp               [/]     Karakteristika servo pojacala</span>
<span class="comment">%eta_mk             [/]     Mehanicki stepen korisnosti komande</span>
<span class="comment">%F_gkc              [N]     Sila na klipnjaci glavnog kocnog cilindra</span>
<span class="comment">%A_gkc              [m^2]   Povrsina poprecnog preseka klipa gl.koc.cil.</span>
<span class="comment">%d_gkc              [m]     Precnik klipa glavnog kocnog cilindra</span>
<span class="comment">%p_h                [N/m^2] Pritisak u prenosnom mehanizmu</span>
<span class="comment">%F_kp               [N]     Sila kocenja na prednjoj osovini</span>
<span class="comment">%F_kz               [N]     Sila kocenja na zadnjoj osovini</span>
<span class="comment">%F_k                [N]     Ukupna sila kocenja</span>
<span class="comment">%q_op               [/]     Kocni koeficient za optereceno vozilo</span>
<span class="comment">%q_no               [/]     Kocni koeficient za neoptereceno vozilo</span>
<span class="comment">%Z_pd               [N]     Dinamicke reakcije na prednjoj osovini</span>
<span class="comment">%Z_zd               [N]     Dinamicke reakcije na zadnjoj osovini</span>
<span class="comment">%phi_p              [/]     Iskorisceno prijanjanje na prednjoj osovini</span>
<span class="comment">%phi_z              [/]     Iskorisceno prijanjanje na zadnjoj osovini</span>
<span class="comment">%s_pkc              [mm]    Hod klipa prednjih kocnih cilindara</span>
<span class="comment">%s_zkc              [mm]    Hod klipa zadnjih kocnih cilindara</span>
<span class="comment">%s_gkc              [mm]    Hod klipa glavnog kocnog cilindra</span>
<span class="comment">%s_shgkc            [mm]    Slobodni hod klipa glavnog kocnog cilindra</span>
<span class="comment">%A_pkc              [m^2]   Povrsina P.P klipa prednjeg kocnog cilindra</span>
<span class="comment">%A_zkc              [m^2]   Povrsina P.P klipa zadnjeg kocnog cilindra</span>
<span class="comment">%A_gkc              [mm^2]  Povrsina P.P klipa glavnog kocnog cilindra</span>
<span class="comment">%V_gkc              [mm^3]  Ukupna zapremina kocnog sistema</span>
<span class="comment">%d_gkc              [mm]    Precnik klipa glavnog kocnog cilindra</span>
<span class="comment">%r_srp              [m]     Srednji poluprecnik trenja prednje kocnice</span>
<span class="comment">%r_srz              [m]     Srednji poluprecnik trenja zadnje kocnice</span>
<span class="comment">%C_p                [/]     Karakteristika prednje kocnice</span>
<span class="comment">%C_z                [/]     Karakteristika zadnje kocnice</span>
<span class="comment">%d_kcp              [m]     Precnik P.P prednjeg kocnog cilindra</span>
<span class="comment">%d_zcp              [m]     Precnik P.P zadnjeg kocnog cilindra</span>
<span class="comment">%r_d                [m]     Dinamicki poluprecnik tocka</span>
<span class="comment">%m_no               [kg]    Masa neopterecenog vozila</span>
<span class="comment">%m_o                [kg]    Masa opterecenog vozila</span>
<span class="comment">%l                  [m]     Medjuosovinsko rastojanje vozila</span>
<span class="comment">%l_po               [m]     Rastojanje prednje osovine od tezista u</span>
<span class="comment">%opterecenom stanju</span>
<span class="comment">%l_zo               [m]     Rastojanje zadnje osovine od tezista u</span>
<span class="comment">%opterecenom stanju</span>
<span class="comment">%l_pno               [m]     Rastojanje prednje osovine od tezista u</span>
<span class="comment">%neopterecenom stanju</span>
<span class="comment">%l_zno               [m]     Rastojanje zadnje osovine od tezista u</span>
<span class="comment">%neopterecenom stanju</span>
<span class="comment">%h_co                [m]     Visina tezista vozila u opterecenom stanju</span>
<span class="comment">%h_cno               [m]     Visina tezista vozila u neopterecenom stanju</span>
<span class="comment">%phi_po              [/]     Iskorisceno prijanjanje prednje osovine u</span>
<span class="comment">%opterecenom stanju</span>
<span class="comment">%phi_zo              [/]     Iskorisceno prijanjanje zadnje osovine u</span>
<span class="comment">%opterecenom stanju</span>
<span class="comment">%phi_pno              [/]     Iskorisceno prijanjanje prednje osovine u</span>
<span class="comment">%neopterecenom stanju</span>
<span class="comment">%phi_zno              [/]     Iskorisceno prijanjanje zadnje osovine u</span>
<span class="comment">%neopterecenom stanju</span>

<span class="comment">%==========================================================================</span>
</pre><pre class="codeinput"><span class="comment">%Ulazni podaci</span>
<span class="comment">%==========================================================================</span>
F_p=getappdata(0,<span class="string">'F_pmax'</span>);
i_p=getappdata(0,<span class="string">'i_p'</span>);
C_sp=getappdata(0,<span class="string">'C_sp'</span>);
d_gkc=getappdata(0,<span class="string">'d_gkc'</span>);
A_gkc=(d_gkc^2).*(pi./4);
eta_mk=getappdata(0,<span class="string">'eta_m'</span>);
A_pkc=getappdata(0,<span class="string">'A_kp'</span>);
A_zkc=getappdata(0,<span class="string">'A_kz'</span>);
eta_h=getappdata(0,<span class="string">'eta_h'</span>);
C_p=getappdata(0,<span class="string">'C_p'</span>);
C_z=getappdata(0,<span class="string">'C_z'</span>);
d_kcp=getappdata(0,<span class="string">'d_cp'</span>);    <span class="comment">%[mm]</span>
d_kcz=getappdata(0,<span class="string">'d_cz'</span>);    <span class="comment">%[mm]</span>
r_srp=getappdata(0,<span class="string">'r_srp'</span>);    <span class="comment">%[mm]</span>
r_srz=getappdata(0,<span class="string">'r_srz'</span>);    <span class="comment">%[mm]</span>
r_d=getappdata(0,<span class="string">'r_d'</span>).*1000;  <span class="comment">%[mm]</span>
m_o=getappdata(0,<span class="string">'m_o'</span>);        <span class="comment">%[kg]</span>
g=10;                           <span class="comment">%[m^s^2]</span>
m_no=getappdata(0,<span class="string">'m_no'</span>);      <span class="comment">%[kg]</span>
l=getappdata(0,<span class="string">'L'</span>);            <span class="comment">%[m]</span>
l_pno=getappdata(0,<span class="string">'l_pno'</span>);    <span class="comment">%[m]</span>
l_zno=getappdata(0,<span class="string">'l_zno'</span>);    <span class="comment">%[m]</span>
l_po=getappdata(0,<span class="string">'l_po'</span>);      <span class="comment">%[m]</span>
l_zo=getappdata(0,<span class="string">'l_zo'</span>);      <span class="comment">%[m]</span>
h_co=getappdata(0,<span class="string">'h_co'</span>);      <span class="comment">%[m]</span>
h_cno=getappdata(0,<span class="string">'h_cno'</span>);    <span class="comment">%[m]</span>
<span class="comment">% f_ped=IK.f_pedale;            %[mm]</span>
phi=0.8;<span class="comment">%[/]</span>
    <span class="keyword">if</span> C_p==0.7
        s_pkc=0.7;    <span class="comment">% za disk kocnice od 0,7-1[mm] za dobos 2 do 2.5[mm]</span>
    <span class="keyword">else</span>
        s_pkc=2;
    <span class="keyword">end</span>
    <span class="keyword">if</span> C_z==0.7
        s_zkc=0.7;    <span class="comment">% za disk kocnice od 0,7-1[mm] za dobos 2 do 2.5[mm]</span>
    <span class="keyword">else</span>
        s_zkc=2;
    <span class="keyword">end</span>
s_shgkc=2;  <span class="comment">% od 1-2[mm]</span>
<span class="comment">%==========================================================================</span>
</pre><pre class="codeinput"><span class="comment">%Funkcija za unos podataka----</span>
<span class="comment">% koristi se naredba 'input' za unos preko komandne linije</span>
<span class="comment">% opcija 's' se odnosi na to da izlazni parametar bude string</span>
<span class="comment">% zatim se koristi komanda 'str2num' za pretvaranje stringa u numericki</span>
<span class="comment">% zapis</span>
<span class="comment">%Primer---- InputStr_N=input('Unesi broj stepeni prenosa N:  ','s');</span>
<span class="comment">% N = str2num(InputStr_N);</span>
<span class="comment">%==========================================================================</span>

<span class="comment">%Sila na klipnjaci glavnog kocnog cilindra druga formula(Dobija se isto)</span>
<span class="comment">%==========================================================================</span>
F_gkc2=F_p.*i_p.*C_sp.*eta_mk;

<span class="comment">%Povrsina poprecnog preseka glavnog kocnog cilindra [mm^2]</span>
<span class="comment">%==========================================================================</span>
V_kc=(2.*(A_pkc).*(10.^(6)).*(s_pkc))+(2.*(A_zkc).*(10.^(6)).*(s_zkc));
setappdata(0,<span class="string">'V_kc'</span>,V_kc)

V_r =1500;         <span class="comment">%zapremina koja uzima u obzir elasticnost creva(1.5-2[cm^3])</span>
setappdata(0,<span class="string">'V_r'</span>,V_r)

V_gkc=V_kc+V_r;     <span class="comment">%Ukupna radna zapremina kocnog sistema</span>
setappdata(0,<span class="string">'V_gkc'</span>,V_gkc)


<span class="comment">%Hod glavnog kocnog cilindra[mm]</span>
s_uk=V_gkc./A_gkc;
setappdata(0,<span class="string">'s_uk'</span>,s_uk)

<span class="comment">%Hod klipa u glavnom kocnom cilindru[mm]</span>
s_gkc=s_uk+s_pkc+s_zkc+s_shgkc;
setappdata(0,<span class="string">'s_gkc'</span>,s_gkc)

<span class="comment">%Hod pedale [mm]</span>
f_p=s_gkc.*i_p;
setappdata(0,<span class="string">'f_p'</span>,f_p)

<span class="comment">%Inkrementalno podeljena vrednost F_p</span>
<span class="comment">%==========================================================================</span>
F_pmin=50;
F_pink=25;
F_pmax=F_p;
F_pinc=F_pmin:F_pink:F_pmax;
setappdata(0,<span class="string">'F_pinc'</span>,F_pinc)

<span class="comment">%Pritisak u prenosnom mehanizmu [MPa]</span>
<span class="comment">%==========================================================================</span>
    <span class="comment">%Faktor pritiska</span>
    kp=(4.*i_p.*C_sp.*eta_mk.*eta_h./(((d_gkc.^(2)).*pi)));
    setappdata(0,<span class="string">'kp'</span>,kp)


p_h=kp.*F_pinc;
setappdata(0,<span class="string">'p_h'</span>,p_h)

<span class="comment">%Sile kocenja po osovinama vozila</span>
<span class="comment">%==========================================================================</span>
            <span class="comment">%faktor prednje sile kocenja</span>
            kfp=2.*C_p.*C_sp.*((d_kcp.^(2)).*r_srp)./((d_gkc).^(2).*r_d)<span class="keyword">...</span>
                .*i_p.*eta_h.*eta_mk;
            setappdata(0,<span class="string">'kfp'</span>,kfp)
            <span class="comment">%faktor zadnje sile kocenja</span>
            kfz=2.*C_z.*C_sp.*((d_kcz.^(2).*r_srz)./((d_gkc).^(2).*r_d))<span class="keyword">...</span>
                *i_p.*eta_h.*eta_mk;
            setappdata(0,<span class="string">'kfz'</span>,kfz)


F_kp=kfp.*F_pinc;
setappdata(0,<span class="string">'F_kp'</span>,F_kp)
F_kz=kfz.*F_pinc;
setappdata(0,<span class="string">'F_kz'</span>,F_kz)



<span class="comment">%Ukupna sila kocenja</span>
<span class="comment">%==========================================================================</span>
            <span class="comment">%faktor ukupne sile kocenja</span>
            k=kfp+kfz;
            setappdata(0,<span class="string">'k'</span>,k)
F_k=k.*F_pinc;
setappdata(0,<span class="string">'F_k'</span>,F_k)

<span class="comment">%Kocni koeficient za optereceno vozilo</span>
<span class="comment">%==========================================================================</span>
            <span class="comment">%faktor kocnog koeficienta</span>
            kq_o=k./(m_o.*g);
            setappdata(0,<span class="string">'kq_o'</span>,kq_o)
q_o=kq_o.*F_pinc;
setappdata(0,<span class="string">'q_o'</span>,q_o)


a_o=q_o.*g;
setappdata(0,<span class="string">'a_o'</span>,a_o)


<span class="comment">%Kocni koeficient za neoptereceno vozilo</span>
<span class="comment">%==========================================================================</span>
   <span class="comment">%faktor kocnog koeficienta</span>
            kq_no=k./(m_no.*g);
            setappdata(0,<span class="string">'kq_no'</span>,kq_no)
q_no=kq_no.*F_pinc;
setappdata(0,<span class="string">'q_no'</span>,q_no)


a_no=q_no.*g;
setappdata(0,<span class="string">'a_no'</span>,a_no)

<span class="comment">%Dinamicke reakcije na prednjoj i zadnjoj osovini u opterecenom stanju</span>
<span class="comment">%==========================================================================</span>

Z_pdo=((m_o.*g)./l).*(l_zo+q_o.*h_co);
setappdata(0,<span class="string">'Z_pdo'</span>,Z_pdo)

Z_zdo=((m_o.*g)./l).*(l_po-q_o.*h_co);
setappdata(0,<span class="string">'Z_zdo'</span>,Z_zdo)

    <span class="comment">%Maksimalna sila kocenja napred i pozadi u opterecenom stanju</span>
    F_pofi=Z_pdo.*phi;
    setappdata(0,<span class="string">'F_pofi'</span>,F_pofi)
    F_zofi=Z_zdo.*phi;
    setappdata(0,<span class="string">'F_zofi'</span>,F_zofi)
<span class="comment">%Dinamicke reakcije na prednjoj i zadnjoj osovini u neopterecenom stanju</span>
<span class="comment">%==========================================================================</span>

Z_pdno=((m_no.*g)./l).*(l_zno+q_no.*h_cno);
setappdata(0,<span class="string">'Z_pdno'</span>,Z_pdno)
Z_zdno=((m_no.*g)./l).*(l_pno-q_no.*h_cno);
setappdata(0,<span class="string">'Z_zdno'</span>,Z_zdno)
<span class="comment">%Maksimalna sila kocenja napred i pozadi u neopterecenom stanju</span>
    F_pnofi=Z_pdno.*phi;
    setappdata(0,<span class="string">'F_pnofi'</span>,F_pnofi)
    F_znofi=Z_zdno.*phi;
    setappdata(0,<span class="string">'F_znofi'</span>,F_znofi)
<span class="comment">%Iskorisceno prijanjanje na prednjoj i zadnjoj osovini u opterecenom stanju</span>
<span class="comment">%==========================================================================</span>

phi_po=(kfp./Z_pdo).*F_pinc;
setappdata(0,<span class="string">'phi_po'</span>,phi_po)
phi_zo=(kfz./Z_zdo).*F_pinc;
setappdata(0,<span class="string">'phi_zo'</span>,phi_zo)

<span class="comment">%Iskorisceno prijanjanje na prednjoj i zadnjoj osovini u neopt. stanju</span>
<span class="comment">%==========================================================================</span>
phi_pno=(kfp./Z_pdno).*F_pinc;
setappdata(0,<span class="string">'phi_pno'</span>,phi_pno)
phi_zno=(kfz./Z_zdno).*F_pinc;
setappdata(0,<span class="string">'phi_zno'</span>,phi_zno)

<span class="comment">%</span>
<span class="comment">% %Dodatak zbog uslova iz GUI_otkaz...</span>

 setappdata(0,<span class="string">'q_okor'</span>,0)
 setappdata(0,<span class="string">'q_oogr'</span>,0)
</pre><pre class="codeoutput error">Error using .*
Matrix dimensions must agree.

Error in GUI_ZavProrBR&gt;ZavProrBR_Rac (line 260)
p_h=kp.*F_pinc;

Error in GUI_ZavProrBR&gt;GUI_ZavProrBR_OpeningFcn (line 63)
ZavProrBR_Rac               %Racunanje

Error in gui_mainfcn (line 220)
    feval(gui_State.gui_OpeningFcn, gui_hFigure, [], guidata(gui_hFigure), varargin{:});

Error in GUI_ZavProrBR (line 42)
    gui_mainfcn(gui_State, varargin{:});
</pre><pre class="codeinput"><span class="keyword">function</span> pres_tacke

<span class="comment">%Ulazni podaci</span>
q_o=getappdata(0,<span class="string">'q_o'</span>);
q_no=getappdata(0,<span class="string">'q_no'</span>);
phi_po=getappdata(0,<span class="string">'phi_po'</span>);
phi_zo=getappdata(0,<span class="string">'phi_zo'</span>);
phi_pno=getappdata(0,<span class="string">'phi_pno'</span>);
phi_zno=getappdata(0,<span class="string">'phi_zno'</span>);




<span class="comment">%Presecne tacke optereceno stanje</span>
<span class="comment">%--------------------------------------------------------------------------</span>
size_qo=size(q_o);
size_qo=size_qo(1,2);
size_phi_po=size(phi_po);
size_phi_po=size_phi_po(1,2);
size_phi_zo=size(phi_zo);
size_phi_zo=size_phi_zo(1,2);

size_q_o=[size_phi_po,size_phi_zo,size_qo];

size_q_o_max=max(size_q_o);
size_q_o_min=min(size_q_o);




[M_o,I_o] = min(size_q_o(:));

[I_row_o, I_col_o] = ind2sub(size(size_q_o),I_o);


<span class="comment">%Napraviti poredjenje sa minimalnom vrednosti, i za tu vrednost da se ne</span>
<span class="comment">%izbacuju vrednosti iz niza...</span>

size_q_o_min1=size_q_o_min+1;

<span class="comment">%Vadjenje podataka iz niza radi nalazenja normalnih presecnih tacaka....</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="keyword">if</span> size_q_o_min~=size_q_o_max

    <span class="keyword">if</span>  I_col_o~=3

        a1=q_o(size_q_o_min1:size_q_o_max);
        q_o(ismember(q_o,a1))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span>  I_col_o~=1

        a2=phi_po(size_q_o_min1:size_q_o_max);
        phi_po(ismember(phi_po,a2))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span>  I_col_o~=2

        a3=phi_zo(size_q_o_min1:size_q_o_max);
        phi_zo(ismember(phi_zo,a3))=[];

    <span class="keyword">end</span>


<span class="keyword">end</span>

<span class="comment">%Vadjenje vrednosti za krivu phi=q...</span>
<span class="comment">%--------------------------------------------------------------------------</span>
qvel1=size(q_o);
dimo=qvel1(1,2);
qo_dij_inc=1.2./dimo;
qo_dij=qo_dij_inc:qo_dij_inc:1.2;
phi_oq=qo_dij;



<span class="comment">%Provera gde se kriva prednje osovine na athezionom dijagramu sece sa</span>
<span class="comment">%linijom q=phi</span>
[qoppr_phi,phi_pogrpr]=curveintersect(q_o,phi_po,qo_dij,phi_oq);

<span class="comment">%--------------------------------------------------------------------------</span>

<span class="comment">%Provera gde se kriva zadnje osovine na athezionom dijagramu sece sa</span>
<span class="comment">%linijom q=phi</span>
[qozpr_phi,phi_zogr]=curveintersect(q_o,phi_zo,qo_dij,phi_oq);
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">%Neoptereceno</span>
<span class="comment">%--------------------------------------------------------------------------</span>
size_qno=size(q_no);
size_qno=size_qno(1,2);
size_phi_pno=size(phi_pno);
size_phi_pno=size_phi_pno(1,2);
size_phi_zno=size(phi_zno);
size_phi_zno=size_phi_zno(1,2);

size_q_no=[size_phi_pno,size_phi_zno,size_qno];

size_q_no_max=max(size_q_no);
size_q_no_min=min(size_q_no);


<span class="comment">%Vadjenje vrednosti za krivu phi=q...</span>
<span class="comment">%--------------------------------------------------------------------------</span>
qvel1_no=size(q_no);
dim_no=qvel1_no(1,2);
qno_dij_inc=1.2./dim_no;
qno_dij=qno_dij_inc:qno_dij_inc:1.2;
phi_noq=qno_dij;



[M_no,I_no] = min(size_q_no(:));

[I_row_no, I_col_no] = ind2sub(size(size_q_no),I_no);


<span class="comment">%Napraviti poredjenje sa minimalnom vrednosti, i za tu vrednost da se ne</span>
<span class="comment">%izbacuju vrednosti iz niza...</span>

size_q_no_min1=size_q_no_min+1;

<span class="comment">%Vadjenje podataka iz niza radi nalazenja normalnih presecnih tacaka....</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="keyword">if</span> size_q_no_min~=size_q_no_max

    <span class="keyword">if</span>  I_col_no~=3

        b1=q_no(size_q_no_min1:size_q_no_max);
        q_no(ismember(q_no,b1))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span>  I_col_no~=1

        b2=phi_pno(size_q_no_min1:size_q_no_max);
        phi_pno(ismember(phi_pno,b2))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span>  I_col_no~=2

        b3=phi_zno(size_q_no_min1:size_q_no_max);
        phi_zno(ismember(phi_zno,b3))=[];

    <span class="keyword">end</span>


<span class="keyword">end</span>

<span class="comment">%Provera gde se kriva prednje osovine na athezionom dijagramu sece sa</span>
<span class="comment">%linijom q=phi</span>

[qnoppr_phi,phi_pnogrprno]=curveintersect(q_no,phi_pno,qno_dij,phi_noq);


<span class="comment">%Provera gde se kriva zadnje osovine na athezionom dijagramu sece sa</span>
<span class="comment">%linijom q=phi</span>
[qnozpr_phi,phi_znogr]=curveintersect(q_no,phi_zno,qno_dij,phi_noq);


<span class="comment">%Presecne tacke sa krivom    fi=(q1+0.07)./0.85.</span>
<span class="comment">%==========================================================================</span>
<span class="comment">%Optereceno</span>

   <span class="comment">%Kriva fi=(q1+0.07)./0.85.</span>
    qo1_dij_inc=1.2./dimo;
    qo1_dij=qo1_dij_inc:qo1_dij_inc:1.2;
    phi_oq1=(qo1_dij+0.07)./0.85;

<span class="comment">%Presecna tacka</span>
    [qoppr_phi1,phi_pogrpr1]=curveintersect(q_o,phi_po,qo1_dij,phi_oq1);

<span class="comment">%Neoptereceno</span>
     <span class="comment">%Kriva fi=(q1+0.07)./0.85.</span>
    qno1_dij_inc=1.2./dim_no;
    qno1_dij=qno1_dij_inc:qno1_dij_inc:1.2;
    phi_noq1=(qno1_dij+0.07)./0.85;

<span class="comment">%Presecna tacka</span>
[qnoppr_phi1,phi_pnogrpr1]=curveintersect(q_no,phi_pno,qno1_dij,phi_noq1);




<span class="comment">%--------------------------------------------------------------------------</span>


    <span class="comment">%Presecne tacke sa krivom q=phi</span>
    <span class="comment">%----------------------------------------------------------------------</span>
   <span class="comment">%OVDE JE NASTAO PROBLEM SA PODACIMA JEDAN JE BIO FORMATA 1X2 DOK SU</span>
   <span class="comment">%OSTALI BILI 1X1...</span>
    qpprusl=[qoppr_phi, qozpr_phi, qnoppr_phi,qnozpr_phi];
    <span class="comment">%Optereceno</span>
    qprus1o=[qoppr_phi, qozpr_phi];
    <span class="comment">%Neoptereceno</span>
    qprus1no=[qnoppr_phi,qnozpr_phi];

    <span class="comment">%Napred ili pozadi, svejedno.</span>
    qpprusl_p=[qoppr_phi, qnoppr_phi];

     <span class="comment">%Presecne tacke sa krivom fi=(q1+0.07)./0.85</span>
    <span class="comment">%----------------------------------------------------------------------</span>
    qpprusl_1=[qoppr_phi1,qnoppr_phi1];


    <span class="keyword">if</span> isempty(qpprusl_1)
        <span class="comment">%Skalarno</span>
        qpprusl_1_bool=[1,1];
        <span class="comment">%Logicki</span>
        qpprusl_1_bool=(qpprusl_1_bool&gt;0);
    <span class="keyword">end</span>


    <span class="keyword">if</span> qpprusl_1&gt;0
      qpprusl_1_bool=(qpprusl_1&lt;=0);

    <span class="keyword">end</span>

    <span class="keyword">if</span>  qpprusl&gt;0
        qpr1_bool= (qpprusl_p&gt;=0.8);
    <span class="keyword">end</span>


<span class="comment">%Petlja za odredjivanje pocetnih uslova if petlje</span>
<span class="comment">%------------------------------------------------------------------------</span>
<span class="comment">%Prvo ispitujemo da li se krive uopste seku sa krivom q=fi, ako se ne seku</span>
<span class="comment">%onda gledamo maksimalne vrednosti q u opterecenom i neopterecenom stanju i</span>
<span class="comment">%odatle posmatramo da li vozilo zadovoljava uslove iz pravilnika</span>

    <span class="comment">%Uslov ako se krive ne seku sa krivom q=phi</span>
<span class="comment">%--------------------------------------------------------------------------</span>
    <span class="keyword">if</span> isempty(qpprusl)
        <span class="comment">%Presecna tacka krivih u opterecenom i neopterecenom stanju</span>
             <span class="comment">%Optereceno</span>
            [qoppr_phi,phi_preso]=curveintersect(q_o,phi_po,q_o,phi_zo);
            <span class="comment">%Neoptereceno</span>
            [qnoppr_phi,phi_presno]=curveintersect(q_no,phi_pno,q_no,phi_zno);

            qpr1=[qoppr_phi,qnoppr_phi];
    <span class="keyword">end</span>

    <span class="keyword">if</span> isempty(qprus1o)
       <span class="comment">%Presecna tacka krivih u opterecenom i neopterecenom stanju</span>
             <span class="comment">%Optereceno</span>
            [qoppr_phi,phi_preso]=curveintersect(q_o,phi_po,q_o,phi_zo);
   <span class="keyword">end</span>

    <span class="keyword">if</span> isempty(qprus1no)
    <span class="comment">%Neoptereceno</span>
            [qnoppr_phi,phi_presno]=curveintersect(q_no,phi_pno,q_no,phi_zno);

    <span class="keyword">end</span>

      qpr1=[qoppr_phi,qnoppr_phi];


   <span class="keyword">if</span> isempty(qpr1)

      qoppr_phi=max(qopres);
      qnoppr_phi=max(qnopres);
      qpr1=[qoppr_phi,qnoppr_phi];

   <span class="keyword">end</span>

   <span class="keyword">if</span> qpr1&gt;0

       <span class="comment">%Logicki pregled uslova</span>
       qpr1_bool= (qpr1&gt;=0.8);

   <span class="keyword">end</span>


<span class="comment">%Ustanovljavanje da li vozilo ispunjava uslove sto se tice dijagrama fi(q)</span>
<span class="comment">%--------------------------------------------------------------------------</span>
n=size(qpprusl_1_bool);
n1=n(1,1);
n2=n(1,2);

<span class="keyword">if</span> qpr1_bool&gt;0

    qpr1_booln=ones(n1,n2);

<span class="keyword">else</span>

    qpr1_booln=zeros(n1,n2);

<span class="keyword">end</span>


qpr1_bool=(qpr1_booln&gt;0);

qpr_bool=qpr1_bool&amp;qpprusl_1_bool;
setappdata(0,<span class="string">'qpr_bool'</span>,qpr_bool)

<span class="keyword">function</span> warn_dialog
</pre><pre class="codeinput">qpr_bool=getappdata(0,<span class="string">'qpr_bool'</span>);



   <span class="keyword">if</span> qpr_bool&gt;0
   myicon1 = imread(<span class="string">'checkmark.png'</span>);
h=msgbox(<span class="string">'Vozilo zadovoljava uslove sa stanovista kocnih performansi prema pravilniku'</span>,<span class="string">'Informacija!!!'</span>,<span class="string">'custom'</span>,myicon1);

   <span class="keyword">else</span>
     myicon2 = imread(<span class="string">'xmark.jpeg'</span>);
h=msgbox(<span class="string">'Vozilo ne zadovoljava uslove sa stanovista kocnih performansi prema pravilniku'</span>,<span class="string">'Upozorenje!!'</span>,<span class="string">'custom'</span>,myicon2);




   <span class="keyword">end</span>
</pre><pre class="codeinput"><span class="keyword">function</span> DiagramBR1
<span class="comment">%==========================================================================</span>


hold <span class="string">on</span>
axis([0 1.5 0 1.5]);

q1=0.1:0.1:1.2;
phi1=0.1:0.1:1.2;
phi2=(q1+0.07)./0.85;
q_o=getappdata(0,<span class="string">'q_o'</span>);
q_no=getappdata(0,<span class="string">'q_no'</span>);
phi_po=getappdata(0,<span class="string">'phi_po'</span>);
phi_pno=getappdata(0,<span class="string">'phi_pno'</span>);
phi_zo=getappdata(0,<span class="string">'phi_zo'</span>);
phi_zno=getappdata(0,<span class="string">'phi_zno'</span>);


plot(q1,phi1,<span class="string">'LineWidth'</span>,2);
plot(q_o,phi_po,<span class="string">'-rs'</span>,<span class="string">'LineWidth'</span>,2,<span class="keyword">...</span>
                <span class="string">'MarkerEdgeColor'</span>,<span class="string">'k'</span>,<span class="keyword">...</span>
                <span class="string">'MarkerFaceColor'</span>,<span class="string">'g'</span>,<span class="keyword">...</span>
                <span class="string">'MarkerSize'</span>,5);
plot(q_o,phi_zo,<span class="string">'-ks'</span>,<span class="string">'LineWidth'</span>,2,<span class="keyword">...</span>
                <span class="string">'MarkerEdgeColor'</span>,<span class="string">'k'</span>,<span class="keyword">...</span>
                <span class="string">'MarkerFaceColor'</span>,<span class="string">'c'</span>,<span class="keyword">...</span>
                <span class="string">'MarkerSize'</span>,5);

<span class="comment">% plot(q1,phi11);</span>
plot(q1,phi2);
plot(q_no,phi_pno,<span class="string">'--rs'</span>,<span class="string">'LineWidth'</span>,2,<span class="keyword">...</span>
                <span class="string">'MarkerEdgeColor'</span>,<span class="string">'k'</span>,<span class="keyword">...</span>
                <span class="string">'MarkerFaceColor'</span>,<span class="string">'g'</span>,<span class="keyword">...</span>
                <span class="string">'MarkerSize'</span>,5);
plot(q_no,phi_zno,<span class="string">'--ks'</span>,<span class="string">'LineWidth'</span>,2,<span class="keyword">...</span>
                <span class="string">'MarkerEdgeColor'</span>,<span class="string">'k'</span>,<span class="keyword">...</span>
                <span class="string">'MarkerFaceColor'</span>,<span class="string">'c'</span>,<span class="keyword">...</span>
                <span class="string">'MarkerSize'</span>,5);
xlabel(<span class="string">'q[/]'</span>);
ylabel(<span class="string">'\phi[/]'</span>);
hleg1 = legend(<span class="string">'q=\phi'</span>,<span class="string">'\phi_{po}'</span>,<span class="string">'\phi_{zo}'</span>,<span class="string">'phi=(q+0.07)/0.85'</span>,<span class="keyword">...</span>
<span class="string">'\phi_{pno}'</span>,<span class="string">'\phi_{zno}'</span>);


<span class="keyword">function</span> DijagramBR2
<span class="comment">%Crtanje dijagrama krivih iskoriscenog prijanjanja u funkciji od pritiska</span>
<span class="comment">%aktiviranja</span>
<span class="comment">%==========================================================================</span>
q_no=getappdata(0,<span class="string">'q_no'</span>);
F_kp=getappdata(0,<span class="string">'F_kp'</span>);
F_kz=getappdata(0,<span class="string">'F_kz'</span>);
F_k=getappdata(0,<span class="string">'F_k'</span>);
F_pnofi=getappdata(0,<span class="string">'F_pnofi'</span>);
F_znofi=getappdata(0,<span class="string">'F_znofi'</span>);

<span class="comment">%axis([0 0.8 0 12000]);</span>
hold <span class="string">on</span>
grid <span class="string">on</span>
xlabel(<span class="string">'q[/]'</span>);
ylabel(<span class="string">'F[N]'</span>);
plot(q_no,F_kp,<span class="string">'-c'</span>);
plot(q_no,F_kz,<span class="string">'-m'</span>);
plot(q_no,F_k,<span class="string">'-k'</span>);
plot(q_no,F_pnofi,<span class="string">'-r'</span>);
plot(q_no,F_znofi,<span class="string">'-b'</span>);
hleg2 = legend(<span class="string">'F_kp'</span>,<span class="string">'F_kz'</span>,<span class="string">'F_k'</span>,<span class="string">'F_pnophi'</span>,<span class="keyword">...</span>
<span class="string">'F_znophi'</span>);


<span class="keyword">function</span> DijagramBR3
<span class="comment">%Crtanje dijagrama blokiranja kretaca</span>
<span class="comment">%==========================================================================</span>

q_o=getappdata(0,<span class="string">'q_o'</span>);
F_kp=getappdata(0,<span class="string">'F_kp'</span>);
F_kz=getappdata(0,<span class="string">'F_kz'</span>);
F_k=getappdata(0,<span class="string">'F_k'</span>);
F_pofi=getappdata(0,<span class="string">'F_pofi'</span>);
F_zofi=getappdata(0,<span class="string">'F_zofi'</span>);

<span class="comment">%axis([0 0.8 0 12000]);</span>
hold <span class="string">on</span>
grid <span class="string">on</span>
xlabel(<span class="string">'q[/]'</span>);
ylabel(<span class="string">'F[N]'</span>);
plot(q_o,F_kp,<span class="string">'-c'</span>);
plot(q_o,F_kz,<span class="string">'-m'</span>);
plot(q_o,F_k,<span class="string">'-k'</span>);
plot(q_o,F_pofi,<span class="string">'-r'</span>);
plot(q_o,F_zofi,<span class="string">'-b'</span>);
hleg2 = legend(<span class="string">'F_kp'</span>,<span class="string">'F_kz'</span>,<span class="string">'F_k'</span>,<span class="string">'F_pophi'</span>,<span class="keyword">...</span>
<span class="string">'F_zophi'</span>);


<span class="keyword">function</span> DijagramBR4
<span class="comment">%Crtanje dijagrama usporenja u funkciji od sile na pedali</span>
<span class="comment">%==========================================================================</span>
getappdata(0,<span class="string">'F_pinco'</span>)

a_ostv=getappdata(0,<span class="string">'a_ostvogr'</span>);
a_nostv=getappdata(0,<span class="string">'a_nostvogr'</span>);
F_pinco=getappdata(0,<span class="string">'F_pincoogr'</span>);
F_pincno=getappdata(0,<span class="string">'F_pincnoogr'</span>);


hold <span class="string">on</span>
grid <span class="string">on</span>
plot(F_pinco,a_ostv);
plot(F_pincno,a_nostv,<span class="string">'--'</span>);


xlabel(<span class="string">'F_p[N]'</span>);
ylabel(<span class="string">'a[m/s^{2}]'</span>);
legend(<span class="string">'aopt'</span>,<span class="string">'aneopt'</span>)


<span class="keyword">function</span> PresTackeOgr
<span class="comment">%Presecne tacke</span>

<span class="comment">%Ulazni podaci</span>
<span class="comment">%==========================================================================</span>
q_o=getappdata(0,<span class="string">'q_o'</span>);
q_o(isnan(q_o))=0;
q_no=getappdata(0,<span class="string">'q_no'</span>);
q_no(isnan(q_no))=0;
F_kp=getappdata(0,<span class="string">'F_kp'</span>);
F_kz=getappdata(0,<span class="string">'F_kz'</span>);
F_pofi=getappdata(0,<span class="string">'F_pofi'</span>);
F_pofi(isnan(F_pofi))=0;
F_zofi=getappdata(0,<span class="string">'F_zofi'</span>);
F_zofi(isnan(F_zofi))=0;
F_pnofi=getappdata(0,<span class="string">'F_pnofi'</span>);
F_pnofi(isnan(F_pnofi))=0;
F_znofi=getappdata(0,<span class="string">'F_znofi'</span>);
F_znofi(isnan(F_znofi))=0;
a_o=getappdata(0,<span class="string">'a_o'</span>);
a_o(isnan(a_o))=0;
a_no=getappdata(0,<span class="string">'a_no'</span>);
a_no(isnan(a_no))=0;
F_pinc=getappdata(0,<span class="string">'F_pinc'</span>);


<span class="comment">%Presecne tacke su resene tako sto se prvo pogleda koja kriva ima najmanji</span>
<span class="comment">%niz, i prema njoj se u ostalim krivim vade clanovi niza koji su visak...</span>

size_qo=size(q_o);
size_qo=size_qo(1,2);
size_F_kp=size(F_kp);
size_F_kp=size_F_kp(1,2);
size_F_pofi=size(F_pofi);
size_F_pofi=size_F_pofi(1,2);
size_F_kz=size(F_kz);
size_F_kz=size_F_kz(1,2);
size_F_zofi=size(F_zofi);
size_F_zofi=size_F_zofi(1,2);

size_o=[size_F_zofi,size_F_kz,size_F_pofi,size_F_kp,size_qo];

size_o_max=max(size_o);
size_o_min=min(size_o);

size_o_total=size_o_max-size_o_min;


[M_o,I_o] = min(size_o(:));

[I_row_o, I_col_o] = ind2sub(size(size_o),I_o);


<span class="comment">%Napraviti poredjenje sa minimalnom vrednosti, i za tu vrednost da se ne</span>
<span class="comment">%izbacuju vrednosti iz niza...</span>

size_o_min1=size_o_min+1;

<span class="comment">%Vadjenje podataka iz niza radi nalazenja normalnih presecnih tacaka....</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="keyword">if</span> size_o_min~=size_o_max

    <span class="keyword">if</span>  I_col_o~=5

        a1=q_o(size_o_min1:size_o_max);
        q_o(ismember(q_o,a1))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span>  I_col_o~=4

        a2=F_kp(size_o_min1:size_o_max);
        F_kp(ismember(F_kp,a2))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span>  I_col_o~=3

        a3=F_pofi(size_o_min1:size_o_max);
        F_pofi(ismember(F_pofi,a3))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span> I_col_o~=2

        a4=F_kz(size_o_min1:size_o_max);
        F_kz(ismember(F_kz,a4))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span> I_col_o~=1

        a5=F_zofi(size_o_min1:size_o_max);
        F_zofi(ismember(F_zofi,a5))=[];


    <span class="keyword">end</span>

<span class="keyword">end</span>



<span class="comment">%==========================================================================</span>
<span class="comment">%Optereceno</span>



[qoppr,Fppr]=curveintersect(q_o,F_kp,q_o,F_pofi);


[qozpr,Fzpr]=curveintersect(q_o,F_kz,q_o,F_zofi);

qopres=[qoppr,qozpr];


<span class="comment">%Stavljeno 1.5 radi pretpostavke da u slucaju ne blokiranja kretaca vozilo</span>
<span class="comment">%nece dostici vrednost od 1g na toj osovini...</span>



    <span class="keyword">if</span> isempty(qoppr)

        <span class="keyword">if</span> isempty(qozpr)

            qozpr=1.5;

            qopr=max(q_o);

        <span class="keyword">end</span>

        qoppr=1.5;


    <span class="keyword">end</span>


     <span class="keyword">if</span> isempty(qozpr)

        <span class="keyword">if</span> isempty(qoppr)

            qoppr=1.5;

            qopr=max(q_o);

        <span class="keyword">end</span>

        qozpr=1.5;


    <span class="keyword">end</span>







    <span class="comment">%Dodavane vrednosti za pisanje upozorenja na ekranu.</span>
     qobool=logical(0);

    <span class="keyword">if</span> qoppr&gt;qozpr

        qopr=qozpr;
        qobool=logical(1);

    <span class="keyword">else</span>

        <span class="keyword">if</span> qoppr&lt;qozpr

            qopr=qoppr;

        <span class="keyword">end</span>

    <span class="keyword">end</span>



<span class="comment">%Neoptereceno</span>
<span class="comment">%==========================================================================</span>
size_qno=size(q_no);
size_qno=size_qno(1,2);
size_F_kp=size(F_kp);
size_F_kp=size_F_kp(1,2);
size_F_pnofi=size(F_pnofi);
size_F_pnofi=size_F_pnofi(1,2);
size_F_kz=size(F_kz);
size_F_kz=size_F_kz(1,2);
size_F_znofi=size(F_znofi);
size_F_znofi=size_F_znofi(1,2);

size_no=[size_F_znofi,size_F_kz,size_F_pnofi,size_F_kp,size_qno];

[M_no,I_no] = min(size_no(:));

[I_row_no, I_col_no] = ind2sub(size(size_no),I_no);

size_no_max=max(size_no);
size_no_min=min(size_no);

<span class="comment">%Napraviti poredjenje sa minimalnom vrednosti, i za tu vrednost da se ne</span>
<span class="comment">%izbacuju vrednosti iz niza...</span>

size_no_total=size_no_max-size_no_min;

size_no_n=size_no_max-size_no_total;

size_no_min1=size_no_min+1;

<span class="comment">%Vadjenje podataka iz niza radi nalazenja normalnih presecnih tacaka....</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="keyword">if</span> size_no_min~=size_no_max

    <span class="keyword">if</span>  I_col_no~=5

        b1=q_no(size_no_min1:size_no_max);
        q_no(ismember(q_no,b1))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span>  I_col_no~=4

        b2=F_kp(size_no_min1:size_no_max);
        F_kp(ismember(F_kp,b2))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span>  I_col_no~=3

        b3=F_pnofi(size_no_min1:size_no_max);
        F_pnofi(ismember(F_pnofi,b3))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span> I_col_no~=2

        b4=F_kz(size_no_min1:size_no_max);
        F_kz(ismember(F_kz,b4))=[];

    <span class="keyword">end</span>

    <span class="keyword">if</span> I_col_no~=1

        b5=F_znofi(size_no_min1:size_no_max);
        F_znofi(ismember(F_znofi,b5))=[];


    <span class="keyword">end</span>

<span class="keyword">end</span>


<span class="comment">%Neoptereceno</span>
[qnoppr,Fppr]=curveintersect(q_no,F_kp,q_no,F_pnofi);

[qnozpr,Fzpr]=curveintersect(q_no,F_kz,q_no,F_znofi);

qnopres=[qnoppr,qnozpr];






<span class="comment">%Stavljeno 1.5 radi pretpostavke da u slucaju ne blokiranja kretaca vozilo</span>
<span class="comment">%nece dostici vrednost od 1g na toj osovini...</span>

            <span class="keyword">if</span> isempty(qnoppr)

                 <span class="keyword">if</span> isempty(qnozpr)

                qnozpr=1.5;

                qnopr=max(q_no);

                <span class="keyword">end</span>

            qnoppr=1.5;

            <span class="keyword">end</span>


            <span class="keyword">if</span> isempty(qnozpr)

                 <span class="keyword">if</span> isempty(qnoppr)

                qnoppr=1.5;

                qnopr=max(q_no);

                <span class="keyword">end</span>

            qnozpr=1.5;

            <span class="keyword">end</span>




     <span class="comment">%Videti ovaj uslov sto stoji ovde....</span>
    qnobool=logical(0);

    <span class="keyword">if</span> qnoppr&gt;qnozpr

        qnopr=qnozpr;
        qnobool=logical(1);


    <span class="keyword">else</span>

         <span class="keyword">if</span> qnoppr&lt;qnozpr

                qnopr=qnoppr;

         <span class="keyword">end</span>

    <span class="keyword">end</span>



     qbool=[qobool,qnobool];


     <span class="keyword">if</span> qbool&gt;0

     myicon = imread(<span class="string">'xmark.jpeg'</span>);
     h=msgbox(<span class="string">'Prvo ce blokirati zadnji tockovi vozila a to ce prouzrokovati nestabilnost vozila'</span>,<span class="string">'Upozorenje!!'</span>,<span class="string">'custom'</span>,myicon);

     <span class="keyword">end</span>








<span class="comment">%Maksimalno realno usporenje koje se moze ostvariti</span>
<span class="comment">%==========================================================================</span>

<span class="comment">%Optereceno</span>
a_omax=qopr*10;
a_ostv=a_o(a_o&lt;a_omax);
no=size(a_ostv);
no=no(1,2);
no1=no+1;
a_ostv(1,no1)=a_omax;
setappdata(0,<span class="string">'a_ostvogr'</span>,a_ostv)
F_pincoInt=interp1(a_o,F_pinc,a_omax);
F_pinco=F_pinc(F_pinc&lt;F_pincoInt);
fno=size(F_pinco);
fno=fno(1,2);
fno1=fno+1;
F_pinco(1,fno1)=F_pincoInt;
setappdata(0,<span class="string">'F_pincoogr'</span>,F_pinco)

<span class="comment">%Neoptereceno</span>
a_nomax=qnopr*10;
a_nostv=a_no(a_no&lt;a_nomax);
nno=size(a_nostv);
nno=nno(1,2);
nno1=nno+1;
a_nostv(1,nno1)=a_nomax;
setappdata(0,<span class="string">'a_nostvogr'</span>,a_nostv)
F_pincnoInt=interp1(a_no,F_pinc,a_nomax);
F_pincno=F_pinc(F_pinc&lt;F_pincnoInt);
fnno=size(F_pincno);
fnno=fnno(1,2);
fnno1=fnno+1;
F_pincno(1,fnno1)=F_pincnoInt;
setappdata(0,<span class="string">'F_pincnoogr'</span>,F_pincno)


<span class="keyword">function</span> print_ZavProrBR

F_gkc2=getappdata(0,<span class="string">'F_gkc'</span>);
V_kc=getappdata(0,<span class="string">'V_kc'</span>);
V_r=getappdata(0,<span class="string">'V_r'</span>);
V_gkc=getappdata(0,<span class="string">'V_gkc'</span>);
d_gkc=getappdata(0,<span class="string">'d_gkc'</span>);
A_gkc=((d_gkc.^2).*pi)/4;
kp=getappdata(0,<span class="string">'kp'</span>);
kfp=getappdata(0,<span class="string">'kfp'</span>);
kfz=getappdata(0,<span class="string">'kfz'</span>);
k=getappdata(0,<span class="string">'k'</span>);
kq_no=getappdata(0,<span class="string">'kq_no'</span>);
kq_o=getappdata(0,<span class="string">'kq_o'</span>);
s_gkc=getappdata(0,<span class="string">'s_gkc'</span>);
f_p=getappdata(0,<span class="string">'f_p'</span>);
p_h=getappdata(0,<span class="string">'p_h'</span>);
F_kp=getappdata(0,<span class="string">'F_kp'</span>);
F_kz=getappdata(0,<span class="string">'F_kz'</span>);
F_k=getappdata(0,<span class="string">'F_k'</span>);
q_no=getappdata(0,<span class="string">'q_no'</span>);
q_o=getappdata(0,<span class="string">'q_o'</span>);
Z_pdo=getappdata(0,<span class="string">'Z_pdo'</span>);
Z_zdo=getappdata(0,<span class="string">'Z_zdo'</span>);
Z_pdno=getappdata(0,<span class="string">'Z_pdno'</span>);
Z_zdno=getappdata(0,<span class="string">'Z_zdno'</span>);
phi_po=getappdata(0,<span class="string">'phi_po'</span>);
phi_zo=getappdata(0,<span class="string">'phi_zo'</span>);
phi_pno=getappdata(0,<span class="string">'phi_pno'</span>);
phi_zno=getappdata(0,<span class="string">'phi_zno'</span>);
F_pinc=getappdata(0,<span class="string">'F_pinc'</span>);
a_o=getappdata(0,<span class="string">'a_o'</span>);
a_no=getappdata(0,<span class="string">'a_no'</span>);
a_ostv=getappdata(0,<span class="string">'a_ostvogr'</span>);
a_nostv=getappdata(0,<span class="string">'a_nostvogr'</span>);
F_pinco=getappdata(0,<span class="string">'F_pincoogr'</span>);
F_pincno=getappdata(0,<span class="string">'F_pincnoogr'</span>);


C=getappdata(0,<span class="string">'xls_ime_xls'</span>);




DataMatlab2XLS = {<span class="string">'F_gkc[N]'</span>, <span class="string">'V_kc[mm^3]'</span>,<span class="string">'V_r[mm^3]'</span>,<span class="string">'V_gkc[mm^3]'</span>, <span class="string">'A_gkc[mm^2]'</span>,<span class="keyword">...</span>
    <span class="string">'d_gkc[mm]'</span>,<span class="string">'k_p[/]'</span>,<span class="string">'kfp[/]'</span>,<span class="string">'kfz[/]'</span>,<span class="string">'k[/]'</span>,<span class="string">'kq_no[/]'</span>,<span class="string">'kq_o[/]'</span>,<span class="string">'s_gkc[mm]'</span><span class="keyword">...</span>
    ,<span class="string">'f_p[mm]'</span>;F_gkc2 V_kc V_r V_gkc  A_gkc d_gkc kp kfp kfz k kq_no kq_o s_gkc, f_p};
DataMatlab2XLSt=DataMatlab2XLS';
warning(<span class="string">'off'</span>,<span class="string">'MATLAB:xlswrite:Addsheet'</span>);
xlswrite(C, DataMatlab2XLSt,<span class="string">'ZavProrBezReg'</span>,<span class="string">'A1'</span>);


A={<span class="string">'p_h[MPa]'</span>,<span class="string">'F_kp[N]'</span>, <span class="string">'F_kz[N]'</span> ,<span class="string">'F_k[N]'</span>,<span class="string">'q_no[/]'</span>,<span class="string">'q_o[/]'</span>,<span class="string">'Z_pdo[N]'</span>,<span class="string">'Z_zdo[N]'</span>,<span class="keyword">...</span>
    <span class="string">'Z_pdno[N]'</span>,<span class="string">'Z_zdno[N]'</span>,<span class="string">'phi_po[/]'</span>,<span class="string">'phi_zo[/]'</span>,<span class="string">'phi_pno[/]'</span>,<span class="string">'phi_zno[/]'</span><span class="keyword">...</span>
    ,<span class="string">'F_pinc[N]'</span>,<span class="string">'a_o[m/s^2]'</span>,<span class="string">'a_no[m/s^2]'</span>,<span class="string">'F_pincostv[N]'</span><span class="keyword">...</span>
    <span class="string">'a_ostv[m/s^2]'</span>,<span class="string">'F_pincnostv[N]'</span>,<span class="string">'a_nostv[m/s^2]'</span>};
At=A';
DataMatlab2XLS = [p_h ;F_kp; F_kz; F_k ;q_no ;q_o ;Z_pdo ;Z_zdo<span class="keyword">...</span>
    ;Z_pdno ;Z_zdno;phi_po; phi_zo; phi_pno; phi_zno; F_pinc; a_o;<span class="keyword">...</span>
    a_no];
<span class="comment">%</span>
warning(<span class="string">'off'</span>,<span class="string">'MATLAB:xlswrite:Addsheet'</span>);
xlswrite(C, At,<span class="string">'ZavProrBezReg'</span>,<span class="string">'D1'</span>);
<span class="comment">%</span>
warning(<span class="string">'off'</span>,<span class="string">'MATLAB:xlswrite:Addsheet'</span>);
xlswrite(C, DataMatlab2XLS, <span class="string">'ZavProrBezReg'</span>,<span class="string">'E1'</span>);

X=[F_pinco;a_ostv];
xlswrite(C, X, <span class="string">'ZavProrBezReg'</span>,<span class="string">'E18'</span>);
Y=[F_pincno;a_nostv];
xlswrite(C, Y, <span class="string">'ZavProrBezReg'</span>,<span class="string">'E20'</span>);
<span class="comment">% --- Executes on button press in pushbutton2.</span>
<span class="keyword">function</span> pushbutton2_Callback(hObject, eventdata, handles)
<span class="comment">% hObject    handle to pushbutton2 (see GCBO)</span>
<span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
<span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>

close()
GUI_Otkaz
</pre><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2014a</a><br></p></div><!--
##### SOURCE BEGIN #####
function varargout = GUI_ZavProrBR(varargin)
% GUI_ZAVPRORBR MATLAB code for GUI_ZavProrBR.fig
%      GUI_ZAVPRORBR, by itself, creates a new GUI_ZAVPRORBR or raises the existing
%      singleton*.
%
%      H = GUI_ZAVPRORBR returns the handle to a new GUI_ZAVPRORBR or the handle to
%      the existing singleton*.
%
%      GUI_ZAVPRORBR('CALLBACK',hObject,eventData,handles,...) calls the local
%      function named CALLBACK in GUI_ZAVPRORBR.M with the given input arguments.
%
%      GUI_ZAVPRORBR('Property','Value',...) creates a new GUI_ZAVPRORBR or raises the
%      existing singleton*.  Starting from the left, property value pairs are
%      applied to the GUI before GUI_ZavProrBR_OpeningFcn gets called.  An
%      unrecognized property name or invalid value makes property application
%      stop.  All inputs are passed to GUI_ZavProrBR_OpeningFcn via varargin.
%
%      *See GUI Options on GUIDE's Tools menu.  Choose "GUI allows only one
%      instance to run (singleton)".
%
% See also: GUIDE, GUIDATA, GUIHANDLES

% Edit the above text to modify the response to help GUI_ZavProrBR

% Last Modified by GUIDE v2.5 22-Feb-2016 18:18:32

% Begin initialization code - DO NOT EDIT
gui_Singleton = 1;
gui_State = struct('gui_Name',       mfilename, ...
                   'gui_Singleton',  gui_Singleton, ...
                   'gui_OpeningFcn', @GUI_ZavProrBR_OpeningFcn, ...
                   'gui_OutputFcn',  @GUI_ZavProrBR_OutputFcn, ...
                   'gui_LayoutFcn',  [] , ...
                   'gui_Callback',   []);
if nargin && ischar(varargin{1})
    gui_State.gui_Callback = str2func(varargin{1});
end

if nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
else
    gui_mainfcn(gui_State, varargin{:});
end
% End initialization code - DO NOT EDIT

%feature('DefaultCharacterSet', 'UTF8')
% REPLACE_WITH_DASH_DASH- Executes just before GUI_ZavProrBR is made visible.
function GUI_ZavProrBR_OpeningFcn(hObject, eventdata, handles, varargin)
% This function has no output args, see OutputFcn.
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
% varargin   command line arguments to GUI_ZavProrBR (see VARARGIN)

% Choose default command line output for GUI_ZavProrBR
handles.output = hObject;

% Update handles structure
guidata(hObject, handles);

%set(handles.Gui_ZAVPRBR, 'units', 'normalized', 'position', [0.05 0.15 0.9 0.8])

ZavProrBR_Rac               %Racunanje
pres_tacke                  %Presecne tacke fi(q)
PresTackeOgr                %Presecne tacke Fki(q)
axes(handles.slika1)
DiagramBR1                  %Plotovanje prvog dijagrama
axes(handles.slika2)
DijagramBR2                 %Plotovanje drugog dijagrama
axes(handles.slika3)
DijagramBR3                 %Plotovanje treceg dijagrama
axes(handles.slika4)
DijagramBR4                 %Plotovanje cetvrtiog dijagrama

h = waitbar(0,'Molimo da sacekate...');
warn_dialog                 %Prozor upozorenja da li vozilo ispunjava uslove
steps = 1;

for step = 1:steps
    % computations take place here
    waitbar(step / steps)
    print_ZavProrBR
end



close(h) 


% UIWAIT makes GUI_ZavProrBR wait for user response (see UIRESUME)
% uiwait(handles.Gui_ZAVPRBR);


% REPLACE_WITH_DASH_DASH- Outputs from this function are returned to the command line.
function varargout = GUI_ZavProrBR_OutputFcn(hObject, eventdata, handles) 
% varargout  cell array for returning output args (see VARARGOUT);
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Get default command line output from handles structure
varargout{1} = handles.output;
function ZavProrBR_Rac
%%
%Velicine 
%==========================================================================
%F_p                [N]     Najveca dozvoljena sila na komandi 
%i_p                [/]     Prenosni odnos pedale 
%C_sp               [/]     Karakteristika servo pojacala
%eta_mk             [/]     Mehanicki stepen korisnosti komande 
%F_gkc              [N]     Sila na klipnjaci glavnog kocnog cilindra 
%A_gkc              [m^2]   Povrsina poprecnog preseka klipa gl.koc.cil.
%d_gkc              [m]     Precnik klipa glavnog kocnog cilindra 
%p_h                [N/m^2] Pritisak u prenosnom mehanizmu  
%F_kp               [N]     Sila kocenja na prednjoj osovini 
%F_kz               [N]     Sila kocenja na zadnjoj osovini 
%F_k                [N]     Ukupna sila kocenja 
%q_op               [/]     Kocni koeficient za optereceno vozilo 
%q_no               [/]     Kocni koeficient za neoptereceno vozilo 
%Z_pd               [N]     Dinamicke reakcije na prednjoj osovini 
%Z_zd               [N]     Dinamicke reakcije na zadnjoj osovini 
%phi_p              [/]     Iskorisceno prijanjanje na prednjoj osovini
%phi_z              [/]     Iskorisceno prijanjanje na zadnjoj osovini
%s_pkc              [mm]    Hod klipa prednjih kocnih cilindara 
%s_zkc              [mm]    Hod klipa zadnjih kocnih cilindara 
%s_gkc              [mm]    Hod klipa glavnog kocnog cilindra 
%s_shgkc            [mm]    Slobodni hod klipa glavnog kocnog cilindra 
%A_pkc              [m^2]   Povrsina P.P klipa prednjeg kocnog cilindra
%A_zkc              [m^2]   Povrsina P.P klipa zadnjeg kocnog cilindra
%A_gkc              [mm^2]  Povrsina P.P klipa glavnog kocnog cilindra 
%V_gkc              [mm^3]  Ukupna zapremina kocnog sistema 
%d_gkc              [mm]    Precnik klipa glavnog kocnog cilindra
%r_srp              [m]     Srednji poluprecnik trenja prednje kocnice
%r_srz              [m]     Srednji poluprecnik trenja zadnje kocnice
%C_p                [/]     Karakteristika prednje kocnice 
%C_z                [/]     Karakteristika zadnje kocnice 
%d_kcp              [m]     Precnik P.P prednjeg kocnog cilindra 
%d_zcp              [m]     Precnik P.P zadnjeg kocnog cilindra 
%r_d                [m]     Dinamicki poluprecnik tocka 
%m_no               [kg]    Masa neopterecenog vozila 
%m_o                [kg]    Masa opterecenog vozila 
%l                  [m]     Medjuosovinsko rastojanje vozila 
%l_po               [m]     Rastojanje prednje osovine od tezista u
%opterecenom stanju
%l_zo               [m]     Rastojanje zadnje osovine od tezista u
%opterecenom stanju
%l_pno               [m]     Rastojanje prednje osovine od tezista u
%neopterecenom stanju
%l_zno               [m]     Rastojanje zadnje osovine od tezista u
%neopterecenom stanju
%h_co                [m]     Visina tezista vozila u opterecenom stanju
%h_cno               [m]     Visina tezista vozila u neopterecenom stanju
%phi_po              [/]     Iskorisceno prijanjanje prednje osovine u
%opterecenom stanju
%phi_zo              [/]     Iskorisceno prijanjanje zadnje osovine u
%opterecenom stanju
%phi_pno              [/]     Iskorisceno prijanjanje prednje osovine u
%neopterecenom stanju
%phi_zno              [/]     Iskorisceno prijanjanje zadnje osovine u
%neopterecenom stanju

%==========================================================================
%%
%Ulazni podaci 
%==========================================================================
F_p=getappdata(0,'F_pmax');
i_p=getappdata(0,'i_p');
C_sp=getappdata(0,'C_sp');
d_gkc=getappdata(0,'d_gkc');
A_gkc=(d_gkc^2).*(pi./4);
eta_mk=getappdata(0,'eta_m');
A_pkc=getappdata(0,'A_kp');
A_zkc=getappdata(0,'A_kz');
eta_h=getappdata(0,'eta_h');
C_p=getappdata(0,'C_p');
C_z=getappdata(0,'C_z');
d_kcp=getappdata(0,'d_cp');    %[mm]
d_kcz=getappdata(0,'d_cz');    %[mm]    
r_srp=getappdata(0,'r_srp');    %[mm]    
r_srz=getappdata(0,'r_srz');    %[mm]
r_d=getappdata(0,'r_d').*1000;  %[mm]
m_o=getappdata(0,'m_o');        %[kg]
g=10;                           %[m^s^2]
m_no=getappdata(0,'m_no');      %[kg]
l=getappdata(0,'L');            %[m]
l_pno=getappdata(0,'l_pno');    %[m]
l_zno=getappdata(0,'l_zno');    %[m]
l_po=getappdata(0,'l_po');      %[m]
l_zo=getappdata(0,'l_zo');      %[m]
h_co=getappdata(0,'h_co');      %[m]
h_cno=getappdata(0,'h_cno');    %[m]
% f_ped=IK.f_pedale;            %[mm]
phi=0.8;%[/]
    if C_p==0.7
        s_pkc=0.7;    % za disk kocnice od 0,7-1[mm] za dobos 2 do 2.5[mm]
    else
        s_pkc=2;
    end
    if C_z==0.7
        s_zkc=0.7;    % za disk kocnice od 0,7-1[mm] za dobos 2 do 2.5[mm]
    else
        s_zkc=2;
    end
s_shgkc=2;  % od 1-2[mm]
%==========================================================================
%%
%%
%Funkcija za unos podatakaREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
% koristi se naredba 'input' za unos preko komandne linije
% opcija 's' se odnosi na to da izlazni parametar bude string
% zatim se koristi komanda 'str2num' za pretvaranje stringa u numericki
% zapis 
%PrimerREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH InputStr_N=input('Unesi broj stepeni prenosa N:  ','s');
% N = str2num(InputStr_N);
%==========================================================================

%Sila na klipnjaci glavnog kocnog cilindra druga formula(Dobija se isto)
%==========================================================================
F_gkc2=F_p.*i_p.*C_sp.*eta_mk;

%Povrsina poprecnog preseka glavnog kocnog cilindra [mm^2]
%==========================================================================
V_kc=(2.*(A_pkc).*(10.^(6)).*(s_pkc))+(2.*(A_zkc).*(10.^(6)).*(s_zkc));
setappdata(0,'V_kc',V_kc)

V_r =1500;         %zapremina koja uzima u obzir elasticnost creva(1.5-2[cm^3])
setappdata(0,'V_r',V_r)

V_gkc=V_kc+V_r;     %Ukupna radna zapremina kocnog sistema
setappdata(0,'V_gkc',V_gkc)


%Hod glavnog kocnog cilindra[mm]
s_uk=V_gkc./A_gkc;
setappdata(0,'s_uk',s_uk)

%Hod klipa u glavnom kocnom cilindru[mm]
s_gkc=s_uk+s_pkc+s_zkc+s_shgkc;
setappdata(0,'s_gkc',s_gkc)

%Hod pedale [mm]
f_p=s_gkc.*i_p;
setappdata(0,'f_p',f_p)

%Inkrementalno podeljena vrednost F_p 
%==========================================================================
F_pmin=50;
F_pink=25;
F_pmax=F_p;
F_pinc=F_pmin:F_pink:F_pmax;
setappdata(0,'F_pinc',F_pinc)

%Pritisak u prenosnom mehanizmu [MPa]
%==========================================================================
    %Faktor pritiska 
    kp=(4.*i_p.*C_sp.*eta_mk.*eta_h./(((d_gkc.^(2)).*pi)));
    setappdata(0,'kp',kp)
    
    
p_h=kp.*F_pinc;
setappdata(0,'p_h',p_h)

%Sile kocenja po osovinama vozila 
%==========================================================================
            %faktor prednje sile kocenja 
            kfp=2.*C_p.*C_sp.*((d_kcp.^(2)).*r_srp)./((d_gkc).^(2).*r_d)...
                .*i_p.*eta_h.*eta_mk;
            setappdata(0,'kfp',kfp)
            %faktor zadnje sile kocenja 
            kfz=2.*C_z.*C_sp.*((d_kcz.^(2).*r_srz)./((d_gkc).^(2).*r_d))...
                *i_p.*eta_h.*eta_mk;
            setappdata(0,'kfz',kfz)
            
            
F_kp=kfp.*F_pinc;
setappdata(0,'F_kp',F_kp)
F_kz=kfz.*F_pinc;
setappdata(0,'F_kz',F_kz)

            
            
%Ukupna sila kocenja 
%==========================================================================
            %faktor ukupne sile kocenja
            k=kfp+kfz;
            setappdata(0,'k',k)
F_k=k.*F_pinc;
setappdata(0,'F_k',F_k)

%Kocni koeficient za optereceno vozilo 
%==========================================================================
            %faktor kocnog koeficienta 
            kq_o=k./(m_o.*g);
            setappdata(0,'kq_o',kq_o)
q_o=kq_o.*F_pinc;
setappdata(0,'q_o',q_o)


a_o=q_o.*g;
setappdata(0,'a_o',a_o)


%Kocni koeficient za neoptereceno vozilo
%==========================================================================
   %faktor kocnog koeficienta 
            kq_no=k./(m_no.*g);
            setappdata(0,'kq_no',kq_no)
q_no=kq_no.*F_pinc;
setappdata(0,'q_no',q_no)


a_no=q_no.*g;
setappdata(0,'a_no',a_no)

%Dinamicke reakcije na prednjoj i zadnjoj osovini u opterecenom stanju
%==========================================================================

Z_pdo=((m_o.*g)./l).*(l_zo+q_o.*h_co);
setappdata(0,'Z_pdo',Z_pdo)

Z_zdo=((m_o.*g)./l).*(l_po-q_o.*h_co);
setappdata(0,'Z_zdo',Z_zdo)

    %Maksimalna sila kocenja napred i pozadi u opterecenom stanju
    F_pofi=Z_pdo.*phi;
    setappdata(0,'F_pofi',F_pofi)
    F_zofi=Z_zdo.*phi;
    setappdata(0,'F_zofi',F_zofi)
%Dinamicke reakcije na prednjoj i zadnjoj osovini u neopterecenom stanju
%==========================================================================

Z_pdno=((m_no.*g)./l).*(l_zno+q_no.*h_cno);
setappdata(0,'Z_pdno',Z_pdno)
Z_zdno=((m_no.*g)./l).*(l_pno-q_no.*h_cno);
setappdata(0,'Z_zdno',Z_zdno)
%Maksimalna sila kocenja napred i pozadi u neopterecenom stanju
    F_pnofi=Z_pdno.*phi;
    setappdata(0,'F_pnofi',F_pnofi)
    F_znofi=Z_zdno.*phi;
    setappdata(0,'F_znofi',F_znofi)
%Iskorisceno prijanjanje na prednjoj i zadnjoj osovini u opterecenom stanju
%==========================================================================

phi_po=(kfp./Z_pdo).*F_pinc;
setappdata(0,'phi_po',phi_po)
phi_zo=(kfz./Z_zdo).*F_pinc;
setappdata(0,'phi_zo',phi_zo)

%Iskorisceno prijanjanje na prednjoj i zadnjoj osovini u neopt. stanju
%==========================================================================
phi_pno=(kfp./Z_pdno).*F_pinc;
setappdata(0,'phi_pno',phi_pno)
phi_zno=(kfz./Z_zdno).*F_pinc;
setappdata(0,'phi_zno',phi_zno)

% 
% %Dodatak zbog uslova iz GUI_otkaz...

 setappdata(0,'q_okor',0)
 setappdata(0,'q_oogr',0)




function pres_tacke

%Ulazni podaci
q_o=getappdata(0,'q_o');
q_no=getappdata(0,'q_no');
phi_po=getappdata(0,'phi_po');    
phi_zo=getappdata(0,'phi_zo');
phi_pno=getappdata(0,'phi_pno');    
phi_zno=getappdata(0,'phi_zno');



 
%Presecne tacke optereceno stanje
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
size_qo=size(q_o);
size_qo=size_qo(1,2);
size_phi_po=size(phi_po);
size_phi_po=size_phi_po(1,2);
size_phi_zo=size(phi_zo);
size_phi_zo=size_phi_zo(1,2);

size_q_o=[size_phi_po,size_phi_zo,size_qo];

size_q_o_max=max(size_q_o);
size_q_o_min=min(size_q_o);




[M_o,I_o] = min(size_q_o(:));

[I_row_o, I_col_o] = ind2sub(size(size_q_o),I_o);


%Napraviti poredjenje sa minimalnom vrednosti, i za tu vrednost da se ne
%izbacuju vrednosti iz niza...

size_q_o_min1=size_q_o_min+1;

%Vadjenje podataka iz niza radi nalazenja normalnih presecnih tacaka....
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
if size_q_o_min~=size_q_o_max
    
    if  I_col_o~=3

        a1=q_o(size_q_o_min1:size_q_o_max);
        q_o(ismember(q_o,a1))=[];

    end

    if  I_col_o~=1

        a2=phi_po(size_q_o_min1:size_q_o_max);
        phi_po(ismember(phi_po,a2))=[];

    end

    if  I_col_o~=2

        a3=phi_zo(size_q_o_min1:size_q_o_max);
        phi_zo(ismember(phi_zo,a3))=[];

    end

    
end

%Vadjenje vrednosti za krivu phi=q...
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
qvel1=size(q_o);
dimo=qvel1(1,2);
qo_dij_inc=1.2./dimo;
qo_dij=qo_dij_inc:qo_dij_inc:1.2;
phi_oq=qo_dij;



%Provera gde se kriva prednje osovine na athezionom dijagramu sece sa
%linijom q=phi
[qoppr_phi,phi_pogrpr]=curveintersect(q_o,phi_po,qo_dij,phi_oq);

%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH

%Provera gde se kriva zadnje osovine na athezionom dijagramu sece sa
%linijom q=phi
[qozpr_phi,phi_zogr]=curveintersect(q_o,phi_zo,qo_dij,phi_oq);  
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH    
%Neoptereceno
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
size_qno=size(q_no);
size_qno=size_qno(1,2);
size_phi_pno=size(phi_pno);
size_phi_pno=size_phi_pno(1,2);
size_phi_zno=size(phi_zno);
size_phi_zno=size_phi_zno(1,2);

size_q_no=[size_phi_pno,size_phi_zno,size_qno];

size_q_no_max=max(size_q_no);
size_q_no_min=min(size_q_no);


%Vadjenje vrednosti za krivu phi=q...
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
qvel1_no=size(q_no);
dim_no=qvel1_no(1,2);
qno_dij_inc=1.2./dim_no;
qno_dij=qno_dij_inc:qno_dij_inc:1.2;
phi_noq=qno_dij;



[M_no,I_no] = min(size_q_no(:));

[I_row_no, I_col_no] = ind2sub(size(size_q_no),I_no);


%Napraviti poredjenje sa minimalnom vrednosti, i za tu vrednost da se ne
%izbacuju vrednosti iz niza...

size_q_no_min1=size_q_no_min+1;

%Vadjenje podataka iz niza radi nalazenja normalnih presecnih tacaka....
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
if size_q_no_min~=size_q_no_max
    
    if  I_col_no~=3

        b1=q_no(size_q_no_min1:size_q_no_max);
        q_no(ismember(q_no,b1))=[];

    end

    if  I_col_no~=1

        b2=phi_pno(size_q_no_min1:size_q_no_max);
        phi_pno(ismember(phi_pno,b2))=[];

    end

    if  I_col_no~=2

        b3=phi_zno(size_q_no_min1:size_q_no_max);
        phi_zno(ismember(phi_zno,b3))=[];

    end

    
end  

%Provera gde se kriva prednje osovine na athezionom dijagramu sece sa
%linijom q=phi

[qnoppr_phi,phi_pnogrprno]=curveintersect(q_no,phi_pno,qno_dij,phi_noq);  


%Provera gde se kriva zadnje osovine na athezionom dijagramu sece sa
%linijom q=phi
[qnozpr_phi,phi_znogr]=curveintersect(q_no,phi_zno,qno_dij,phi_noq);


%Presecne tacke sa krivom    fi=(q1+0.07)./0.85.
%==========================================================================         
%Optereceno

   %Kriva fi=(q1+0.07)./0.85.
    qo1_dij_inc=1.2./dimo;
    qo1_dij=qo1_dij_inc:qo1_dij_inc:1.2;
    phi_oq1=(qo1_dij+0.07)./0.85;

%Presecna tacka
    [qoppr_phi1,phi_pogrpr1]=curveintersect(q_o,phi_po,qo1_dij,phi_oq1);

%Neoptereceno
     %Kriva fi=(q1+0.07)./0.85.
    qno1_dij_inc=1.2./dim_no;
    qno1_dij=qno1_dij_inc:qno1_dij_inc:1.2;
    phi_noq1=(qno1_dij+0.07)./0.85;

%Presecna tacka
[qnoppr_phi1,phi_pnogrpr1]=curveintersect(q_no,phi_pno,qno1_dij,phi_noq1);




%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH

   
    %Presecne tacke sa krivom q=phi
    %REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
   %OVDE JE NASTAO PROBLEM SA PODACIMA JEDAN JE BIO FORMATA 1X2 DOK SU
   %OSTALI BILI 1X1...
    qpprusl=[qoppr_phi, qozpr_phi, qnoppr_phi,qnozpr_phi];
    %Optereceno
    qprus1o=[qoppr_phi, qozpr_phi];
    %Neoptereceno
    qprus1no=[qnoppr_phi,qnozpr_phi];
    
    %Napred ili pozadi, svejedno.
    qpprusl_p=[qoppr_phi, qnoppr_phi];
    
     %Presecne tacke sa krivom fi=(q1+0.07)./0.85
    %REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
    qpprusl_1=[qoppr_phi1,qnoppr_phi1];
    
    
    if isempty(qpprusl_1)
        %Skalarno
        qpprusl_1_bool=[1,1];  
        %Logicki
        qpprusl_1_bool=(qpprusl_1_bool>0);
    end
    
    
    if qpprusl_1>0
      qpprusl_1_bool=(qpprusl_1<=0);  
    
    end
    
    if  qpprusl>0
        qpr1_bool= (qpprusl_p>=0.8);
    end

  
%Petlja za odredjivanje pocetnih uslova if petlje
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
%Prvo ispitujemo da li se krive uopste seku sa krivom q=fi, ako se ne seku
%onda gledamo maksimalne vrednosti q u opterecenom i neopterecenom stanju i
%odatle posmatramo da li vozilo zadovoljava uslove iz pravilnika

    %Uslov ako se krive ne seku sa krivom q=phi
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH    
    if isempty(qpprusl)
        %Presecna tacka krivih u opterecenom i neopterecenom stanju 
             %Optereceno
            [qoppr_phi,phi_preso]=curveintersect(q_o,phi_po,q_o,phi_zo);
            %Neoptereceno
            [qnoppr_phi,phi_presno]=curveintersect(q_no,phi_pno,q_no,phi_zno);
           
            qpr1=[qoppr_phi,qnoppr_phi];  
    end
    
    if isempty(qprus1o)
       %Presecna tacka krivih u opterecenom i neopterecenom stanju 
             %Optereceno
            [qoppr_phi,phi_preso]=curveintersect(q_o,phi_po,q_o,phi_zo); 
   end
    
    if isempty(qprus1no)
    %Neoptereceno
            [qnoppr_phi,phi_presno]=curveintersect(q_no,phi_pno,q_no,phi_zno);
        
    end
        
      qpr1=[qoppr_phi,qnoppr_phi];

     
   if isempty(qpr1)
                
      qoppr_phi=max(qopres);
      qnoppr_phi=max(qnopres);
      qpr1=[qoppr_phi,qnoppr_phi];
                
   end
   
   if qpr1>0
   
       %Logicki pregled uslova
       qpr1_bool= (qpr1>=0.8);
   
   end
   
   
%Ustanovljavanje da li vozilo ispunjava uslove sto se tice dijagrama fi(q)
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
n=size(qpprusl_1_bool);
n1=n(1,1);
n2=n(1,2);

if qpr1_bool>0
    
    qpr1_booln=ones(n1,n2);
    
else
    
    qpr1_booln=zeros(n1,n2);
       
end


qpr1_bool=(qpr1_booln>0);

qpr_bool=qpr1_bool&qpprusl_1_bool;
setappdata(0,'qpr_bool',qpr_bool)

function warn_dialog

qpr_bool=getappdata(0,'qpr_bool');



   if qpr_bool>0
   myicon1 = imread('checkmark.png');
h=msgbox('Vozilo zadovoljava uslove sa stanovista kocnih performansi prema pravilniku','Informacija!!!','custom',myicon1);
              
   else
     myicon2 = imread('xmark.jpeg');
h=msgbox('Vozilo ne zadovoljava uslove sa stanovista kocnih performansi prema pravilniku','Upozorenje!!','custom',myicon2);
            
  


   end
       

%%
function DiagramBR1
%==========================================================================


hold on
axis([0 1.5 0 1.5]);

q1=0.1:0.1:1.2;
phi1=0.1:0.1:1.2;
phi2=(q1+0.07)./0.85;
q_o=getappdata(0,'q_o');
q_no=getappdata(0,'q_no');
phi_po=getappdata(0,'phi_po');
phi_pno=getappdata(0,'phi_pno');
phi_zo=getappdata(0,'phi_zo');
phi_zno=getappdata(0,'phi_zno');


plot(q1,phi1,'LineWidth',2);
plot(q_o,phi_po,'-rs','LineWidth',2,...
                'MarkerEdgeColor','k',...
                'MarkerFaceColor','g',...
                'MarkerSize',5);
plot(q_o,phi_zo,'-ks','LineWidth',2,...
                'MarkerEdgeColor','k',...
                'MarkerFaceColor','c',...
                'MarkerSize',5);

% plot(q1,phi11); 
plot(q1,phi2); 
plot(q_no,phi_pno,'REPLACE_WITH_DASH_DASHrs','LineWidth',2,...
                'MarkerEdgeColor','k',...
                'MarkerFaceColor','g',...
                'MarkerSize',5);
plot(q_no,phi_zno,'REPLACE_WITH_DASH_DASHks','LineWidth',2,...
                'MarkerEdgeColor','k',...
                'MarkerFaceColor','c',...
                'MarkerSize',5);
xlabel('q[/]');
ylabel('\phi[/]');
hleg1 = legend('q=\phi','\phi_{po}','\phi_{zo}','phi=(q+0.07)/0.85',...
'\phi_{pno}','\phi_{zno}');


function DijagramBR2
%Crtanje dijagrama krivih iskoriscenog prijanjanja u funkciji od pritiska
%aktiviranja
%==========================================================================
q_no=getappdata(0,'q_no');
F_kp=getappdata(0,'F_kp');
F_kz=getappdata(0,'F_kz');
F_k=getappdata(0,'F_k');
F_pnofi=getappdata(0,'F_pnofi');
F_znofi=getappdata(0,'F_znofi');

%axis([0 0.8 0 12000]);
hold on
grid on
xlabel('q[/]');
ylabel('F[N]');
plot(q_no,F_kp,'-c');
plot(q_no,F_kz,'-m');
plot(q_no,F_k,'-k');
plot(q_no,F_pnofi,'-r');
plot(q_no,F_znofi,'-b');
hleg2 = legend('F_kp','F_kz','F_k','F_pnophi',...
'F_znophi');


function DijagramBR3
%Crtanje dijagrama blokiranja kretaca
%==========================================================================

q_o=getappdata(0,'q_o');
F_kp=getappdata(0,'F_kp');
F_kz=getappdata(0,'F_kz');
F_k=getappdata(0,'F_k');
F_pofi=getappdata(0,'F_pofi');
F_zofi=getappdata(0,'F_zofi');

%axis([0 0.8 0 12000]);
hold on
grid on
xlabel('q[/]');
ylabel('F[N]');
plot(q_o,F_kp,'-c');
plot(q_o,F_kz,'-m');
plot(q_o,F_k,'-k');
plot(q_o,F_pofi,'-r');
plot(q_o,F_zofi,'-b');
hleg2 = legend('F_kp','F_kz','F_k','F_pophi',...
'F_zophi');


function DijagramBR4
%Crtanje dijagrama usporenja u funkciji od sile na pedali 
%==========================================================================
getappdata(0,'F_pinco')

a_ostv=getappdata(0,'a_ostvogr');
a_nostv=getappdata(0,'a_nostvogr');
F_pinco=getappdata(0,'F_pincoogr');
F_pincno=getappdata(0,'F_pincnoogr');


hold on
grid on
plot(F_pinco,a_ostv);
plot(F_pincno,a_nostv,'REPLACE_WITH_DASH_DASH');


xlabel('F_p[N]');
ylabel('a[m/s^{2}]');
legend('aopt','aneopt')


function PresTackeOgr
%Presecne tacke

%Ulazni podaci
%==========================================================================
q_o=getappdata(0,'q_o');
q_o(isnan(q_o))=0;
q_no=getappdata(0,'q_no');
q_no(isnan(q_no))=0;
F_kp=getappdata(0,'F_kp');
F_kz=getappdata(0,'F_kz');
F_pofi=getappdata(0,'F_pofi');
F_pofi(isnan(F_pofi))=0;
F_zofi=getappdata(0,'F_zofi');
F_zofi(isnan(F_zofi))=0;
F_pnofi=getappdata(0,'F_pnofi');
F_pnofi(isnan(F_pnofi))=0;
F_znofi=getappdata(0,'F_znofi');
F_znofi(isnan(F_znofi))=0;
a_o=getappdata(0,'a_o');
a_o(isnan(a_o))=0;
a_no=getappdata(0,'a_no');
a_no(isnan(a_no))=0;
F_pinc=getappdata(0,'F_pinc');


%Presecne tacke su resene tako sto se prvo pogleda koja kriva ima najmanji
%niz, i prema njoj se u ostalim krivim vade clanovi niza koji su visak...

size_qo=size(q_o);
size_qo=size_qo(1,2);
size_F_kp=size(F_kp);
size_F_kp=size_F_kp(1,2);
size_F_pofi=size(F_pofi);
size_F_pofi=size_F_pofi(1,2);
size_F_kz=size(F_kz);
size_F_kz=size_F_kz(1,2);
size_F_zofi=size(F_zofi);
size_F_zofi=size_F_zofi(1,2);

size_o=[size_F_zofi,size_F_kz,size_F_pofi,size_F_kp,size_qo];

size_o_max=max(size_o);
size_o_min=min(size_o);

size_o_total=size_o_max-size_o_min;


[M_o,I_o] = min(size_o(:));

[I_row_o, I_col_o] = ind2sub(size(size_o),I_o);


%Napraviti poredjenje sa minimalnom vrednosti, i za tu vrednost da se ne
%izbacuju vrednosti iz niza...

size_o_min1=size_o_min+1;

%Vadjenje podataka iz niza radi nalazenja normalnih presecnih tacaka....
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
if size_o_min~=size_o_max
    
    if  I_col_o~=5

        a1=q_o(size_o_min1:size_o_max);
        q_o(ismember(q_o,a1))=[];

    end

    if  I_col_o~=4

        a2=F_kp(size_o_min1:size_o_max);
        F_kp(ismember(F_kp,a2))=[];

    end

    if  I_col_o~=3

        a3=F_pofi(size_o_min1:size_o_max);
        F_pofi(ismember(F_pofi,a3))=[];

    end

    if I_col_o~=2

        a4=F_kz(size_o_min1:size_o_max);
        F_kz(ismember(F_kz,a4))=[];

    end

    if I_col_o~=1

        a5=F_zofi(size_o_min1:size_o_max);
        F_zofi(ismember(F_zofi,a5))=[];


    end
    
end



%==========================================================================
%Optereceno



[qoppr,Fppr]=curveintersect(q_o,F_kp,q_o,F_pofi);  

   
[qozpr,Fzpr]=curveintersect(q_o,F_kz,q_o,F_zofi);  

qopres=[qoppr,qozpr];


%Stavljeno 1.5 radi pretpostavke da u slucaju ne blokiranja kretaca vozilo
%nece dostici vrednost od 1g na toj osovini...
   


    if isempty(qoppr)
        
        if isempty(qozpr)
        
            qozpr=1.5;
        
            qopr=max(q_o);
        
        end
      
        qoppr=1.5;
        
        
    end
    
    
     if isempty(qozpr)
        
        if isempty(qoppr)
        
            qoppr=1.5;
        
            qopr=max(q_o);
        
        end
      
        qozpr=1.5;
        
        
    end
    




    
   
    %Dodavane vrednosti za pisanje upozorenja na ekranu.
     qobool=logical(0);
        
    if qoppr>qozpr
        
        qopr=qozpr;
        qobool=logical(1);
      
    else
        
        if qoppr<qozpr
        
            qopr=qoppr;
     
        end
     
    end
    
    
    
%Neoptereceno
%==========================================================================
size_qno=size(q_no);
size_qno=size_qno(1,2);
size_F_kp=size(F_kp);
size_F_kp=size_F_kp(1,2);
size_F_pnofi=size(F_pnofi);
size_F_pnofi=size_F_pnofi(1,2);
size_F_kz=size(F_kz);
size_F_kz=size_F_kz(1,2);
size_F_znofi=size(F_znofi);
size_F_znofi=size_F_znofi(1,2);

size_no=[size_F_znofi,size_F_kz,size_F_pnofi,size_F_kp,size_qno];

[M_no,I_no] = min(size_no(:));

[I_row_no, I_col_no] = ind2sub(size(size_no),I_no);

size_no_max=max(size_no);
size_no_min=min(size_no);

%Napraviti poredjenje sa minimalnom vrednosti, i za tu vrednost da se ne
%izbacuju vrednosti iz niza...

size_no_total=size_no_max-size_no_min;

size_no_n=size_no_max-size_no_total;

size_no_min1=size_no_min+1;

%Vadjenje podataka iz niza radi nalazenja normalnih presecnih tacaka....
%REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
if size_no_min~=size_no_max
    
    if  I_col_no~=5

        b1=q_no(size_no_min1:size_no_max);
        q_no(ismember(q_no,b1))=[];

    end

    if  I_col_no~=4

        b2=F_kp(size_no_min1:size_no_max);
        F_kp(ismember(F_kp,b2))=[];

    end

    if  I_col_no~=3

        b3=F_pnofi(size_no_min1:size_no_max);
        F_pnofi(ismember(F_pnofi,b3))=[];

    end

    if I_col_no~=2

        b4=F_kz(size_no_min1:size_no_max);
        F_kz(ismember(F_kz,b4))=[];

    end

    if I_col_no~=1

        b5=F_znofi(size_no_min1:size_no_max);
        F_znofi(ismember(F_znofi,b5))=[];


    end
    
end
   

%Neoptereceno
[qnoppr,Fppr]=curveintersect(q_no,F_kp,q_no,F_pnofi);  

[qnozpr,Fzpr]=curveintersect(q_no,F_kz,q_no,F_znofi);

qnopres=[qnoppr,qnozpr];






%Stavljeno 1.5 radi pretpostavke da u slucaju ne blokiranja kretaca vozilo
%nece dostici vrednost od 1g na toj osovini...     
        
            if isempty(qnoppr)
                
                 if isempty(qnozpr)
        
                qnozpr=1.5;
                
                qnopr=max(q_no);
                 
                end
        
            qnoppr=1.5;
        
            end
            
            
            if isempty(qnozpr)
                
                 if isempty(qnoppr)
        
                qnoppr=1.5;
                
                qnopr=max(q_no);
                 
                end
        
            qnozpr=1.5;
        
            end
    
           
        
       
     %Videti ovaj uslov sto stoji ovde....   
    qnobool=logical(0);
        
    if qnoppr>qnozpr
        
        qnopr=qnozpr;
        qnobool=logical(1);
       
                 
    else
        
         if qnoppr<qnozpr
        
                qnopr=qnoppr;
         
         end
     
    end
        
   
        
     qbool=[qobool,qnobool];   
    

     if qbool>0
     
     myicon = imread('xmark.jpeg');
     h=msgbox('Prvo ce blokirati zadnji tockovi vozila a to ce prouzrokovati nestabilnost vozila','Upozorenje!!','custom',myicon);    
          
     end
       


     
     
             

  
%Maksimalno realno usporenje koje se moze ostvariti
%==========================================================================

%Optereceno
a_omax=qopr*10;
a_ostv=a_o(a_o<a_omax);
no=size(a_ostv);
no=no(1,2);
no1=no+1;
a_ostv(1,no1)=a_omax;
setappdata(0,'a_ostvogr',a_ostv)
F_pincoInt=interp1(a_o,F_pinc,a_omax);
F_pinco=F_pinc(F_pinc<F_pincoInt);
fno=size(F_pinco);
fno=fno(1,2);
fno1=fno+1;
F_pinco(1,fno1)=F_pincoInt;
setappdata(0,'F_pincoogr',F_pinco)

%Neoptereceno
a_nomax=qnopr*10;
a_nostv=a_no(a_no<a_nomax);
nno=size(a_nostv);
nno=nno(1,2);
nno1=nno+1;
a_nostv(1,nno1)=a_nomax;
setappdata(0,'a_nostvogr',a_nostv)
F_pincnoInt=interp1(a_no,F_pinc,a_nomax);
F_pincno=F_pinc(F_pinc<F_pincnoInt);
fnno=size(F_pincno);
fnno=fnno(1,2);
fnno1=fnno+1;
F_pincno(1,fnno1)=F_pincnoInt;
setappdata(0,'F_pincnoogr',F_pincno)


function print_ZavProrBR

F_gkc2=getappdata(0,'F_gkc');
V_kc=getappdata(0,'V_kc');
V_r=getappdata(0,'V_r');
V_gkc=getappdata(0,'V_gkc');
d_gkc=getappdata(0,'d_gkc');
A_gkc=((d_gkc.^2).*pi)/4;
kp=getappdata(0,'kp');
kfp=getappdata(0,'kfp');
kfz=getappdata(0,'kfz');
k=getappdata(0,'k');
kq_no=getappdata(0,'kq_no');
kq_o=getappdata(0,'kq_o');
s_gkc=getappdata(0,'s_gkc');
f_p=getappdata(0,'f_p');
p_h=getappdata(0,'p_h');
F_kp=getappdata(0,'F_kp');
F_kz=getappdata(0,'F_kz');
F_k=getappdata(0,'F_k');
q_no=getappdata(0,'q_no');
q_o=getappdata(0,'q_o');
Z_pdo=getappdata(0,'Z_pdo');
Z_zdo=getappdata(0,'Z_zdo');
Z_pdno=getappdata(0,'Z_pdno');
Z_zdno=getappdata(0,'Z_zdno');
phi_po=getappdata(0,'phi_po');
phi_zo=getappdata(0,'phi_zo');
phi_pno=getappdata(0,'phi_pno');
phi_zno=getappdata(0,'phi_zno');
F_pinc=getappdata(0,'F_pinc');
a_o=getappdata(0,'a_o');
a_no=getappdata(0,'a_no');
a_ostv=getappdata(0,'a_ostvogr');
a_nostv=getappdata(0,'a_nostvogr');
F_pinco=getappdata(0,'F_pincoogr');
F_pincno=getappdata(0,'F_pincnoogr');


C=getappdata(0,'xls_ime_xls');




DataMatlab2XLS = {'F_gkc[N]', 'V_kc[mm^3]','V_r[mm^3]','V_gkc[mm^3]', 'A_gkc[mm^2]',...
    'd_gkc[mm]','k_p[/]','kfp[/]','kfz[/]','k[/]','kq_no[/]','kq_o[/]','s_gkc[mm]'...
    ,'f_p[mm]';F_gkc2 V_kc V_r V_gkc  A_gkc d_gkc kp kfp kfz k kq_no kq_o s_gkc, f_p};
DataMatlab2XLSt=DataMatlab2XLS';
warning('off','MATLAB:xlswrite:Addsheet');
xlswrite(C, DataMatlab2XLSt,'ZavProrBezReg','A1');


A={'p_h[MPa]','F_kp[N]', 'F_kz[N]' ,'F_k[N]','q_no[/]','q_o[/]','Z_pdo[N]','Z_zdo[N]',...
    'Z_pdno[N]','Z_zdno[N]','phi_po[/]','phi_zo[/]','phi_pno[/]','phi_zno[/]'...
    ,'F_pinc[N]','a_o[m/s^2]','a_no[m/s^2]','F_pincostv[N]'...
    'a_ostv[m/s^2]','F_pincnostv[N]','a_nostv[m/s^2]'};
At=A';
DataMatlab2XLS = [p_h ;F_kp; F_kz; F_k ;q_no ;q_o ;Z_pdo ;Z_zdo... 
    ;Z_pdno ;Z_zdno;phi_po; phi_zo; phi_pno; phi_zno; F_pinc; a_o;...
    a_no];
% 
warning('off','MATLAB:xlswrite:Addsheet');
xlswrite(C, At,'ZavProrBezReg','D1');
% 
warning('off','MATLAB:xlswrite:Addsheet');
xlswrite(C, DataMatlab2XLS, 'ZavProrBezReg','E1');

X=[F_pinco;a_ostv];
xlswrite(C, X, 'ZavProrBezReg','E18');
Y=[F_pincno;a_nostv];
xlswrite(C, Y, 'ZavProrBezReg','E20');
% REPLACE_WITH_DASH_DASH- Executes on button press in pushbutton2.
function pushbutton2_Callback(hObject, eventdata, handles)
% hObject    handle to pushbutton2 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

close()
GUI_Otkaz

##### SOURCE END #####
--></body></html>